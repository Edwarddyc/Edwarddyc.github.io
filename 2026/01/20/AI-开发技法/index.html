<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="Edward YC">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://example.com/2026/01/20/ai-开发技法/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="总览本文档记录使用 LLM 的 AI 开发相关的技术总览，构建完整的 AI 开发流程。涉及到 LLM 的调用、基于 SpringAI 或者 LangChain4j 的具体 AI 开发。其中通过 Advisor、Prompt 和 RAG 来辅助和强化模型的能力。  AI 大模型接入 SDK http Spring AI or LangChain4j   Prompt 工程 基本概念 优化策略   A">
<meta property="og:type" content="article">
<meta property="og:title" content="AI 开发技法">
<meta property="og:url" content="http://example.com/2026/01/20/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="总览本文档记录使用 LLM 的 AI 开发相关的技术总览，构建完整的 AI 开发流程。涉及到 LLM 的调用、基于 SpringAI 或者 LangChain4j 的具体 AI 开发。其中通过 Advisor、Prompt 和 RAG 来辅助和强化模型的能力。  AI 大模型接入 SDK http Spring AI or LangChain4j   Prompt 工程 基本概念 优化策略   A">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768984538407.png">
<meta property="og:image" content="http://example.com/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768984881973.png">
<meta property="og:image" content="http://example.com/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768895132048.png">
<meta property="og:image" content="http://example.com/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768897394137.png">
<meta property="og:image" content="http://example.com/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768898007203.png">
<meta property="og:image" content="http://example.com/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768962173256.png">
<meta property="og:image" content="http://example.com/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768987380425.png">
<meta property="og:image" content="http://example.com/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768994593838.png">
<meta property="og:image" content="http://example.com/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1769044018902.png">
<meta property="og:image" content="http://example.com/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1769044961293.png">
<meta property="article:published_time" content="2026-01-20T06:37:17.000Z">
<meta property="article:modified_time" content="2026-01-22T01:55:45.743Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="AI、JAVA">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768984538407.png">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/images/redefine-favicon.svg" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/redefine-favicon.svg">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="/images/redefine-favicon.svg">
    <!--- Page Info-->
    
    <title>
        
            AI 开发技法 -
        
        EDYC&#39;s Blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">


    
        
<link rel="stylesheet" href="/assets/build/styles.css">

    

    
<link rel="stylesheet" href="/fonts/fonts.css">

    
<link rel="stylesheet" href="/fonts/Satoshi/satoshi.css">

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">

    <!--- Font Part-->
    
    
    
    

    <!--- Inject Part-->
    
    <script id="hexo-configurations">
    window.config = {"hostname":"example.com","root":"/","language":"en","path":"search.xml"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":true,"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/wallhaven-48e1yy.webp","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"website_counter":{"url":"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js","enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/images/wallhaven-x8831v.webp","dark":"/images/wallhaven-x8831v.webp"},"title":"Oh Captain! My Captain!","subtitle":{"text":["无行则无知"],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":false,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"links":{"github":"https://github.com/Edwarddyc","instagram":"https://www.instagram.com/ed1210537/","zhihu":null,"twitter":null,"email":null,"weibo":"https://weibo.com/u/7328273521"},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null}]},"mermaid":{"enable":false,"version":"9.3.0"}},"version":"2.5.0","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"About":{"icon":"fa-regular fa-user","submenus":{"Weibo":"https://weibo.com/u/7328273521","Github":"https://github.com/Edwarddyc","Blog":"https://edwarddyc.github.io/","Friends":"/friends"}},"Links":{"icon":"fa-regular fa-link","submenus":{"Link1":"/link1","Link2":"/link2","Link3":"/link3"}}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"links":{"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"Categories":{"path":"/categories","icon":"fa-regular fa-folder"},"Shuoshuo":{"path":"/shuoshuo","icon":"fa-thin fa-comment-dots"}}},"article_date_format":"auto","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2023/10/16 12:20:13"};
    window.lang_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <span class="swup-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container" id="swup">

    

    <div class="main-content-container">


        <div class="main-content-header">
            $logo-title-font-size = 2rem
$desktop-search-icon-font-size = 1.5rem
$navbar-bar-line-height = 2.5px
$logo-image-box-width = 46px

@import '../../common/variables'

.navbar-container
  font-family 'Chillax-Variable', sans-serif
  width 100%
  height 100%
  box-sizing border-box
  display flex
  align-items center
  justify-content center
  background $nav-color-bg
  -webkit-backdrop-filter blur(10px)
  backdrop-filter blur(10px)
  padding-top $scroll-progress-bar-height
  hover-style(
    false,
    0,
    0
  )

  .navbar-content
    position relative
    height 100%
    width $main-content-width
    max-width $content-max-width
    display flex
    flex-direction row
    justify-content space-between
    align-items center
    z-index $z-index-5
    transition max-width 0.3s ease

    &.has-home-banner
      max-width $content-max-width * 1.2

    +redefine-tablet()
      width $main-content-width-tablet

    +redefine-mobile()
      width $main-content-width-mobile

    .left
      display flex
      align-items center
      transform-origin left
      transition-t('transform', '0', '0.2', 'linear')

      .navbar-shrink &
        transform scale(0.72)
        transform-origin left

      if (hexo-config('defaults.logo') && hexo-config('defaults.logo') != '')
        .logo-image
          width $logo-image-box-width
          height $logo-image-box-width
          margin-right 8px

          +redefine-tablet()
            width: $logo-image-box-width * 0.9
            height: $logo-image-box-width * 0.9

          +redefine-mobile()
            width: $logo-image-box-width * 0.8
            height: $logo-image-box-width * 0.8

          img
            border-radius 6px
            width 100%

      .logo-title
        font-size $logo-title-font-size
        font-weight 520
        // letter-spacing 1px
        line-height 1
        color var(--first-text-color)

        h1
          margin 0
          font-size $logo-title-font-size
          font-weight 520
          //letter-spacing 1px
          line-height 1
          color var(--first-text-color)

          +redefine-tablet()
            font-size: $logo-title-font-size * 0.9

          +redefine-mobile()
            font-size: $logo-title-font-size * 0.8

        +redefine-tablet()
          font-size: $logo-title-font-size * 0.9

        +redefine-mobile()
          font-size: $logo-title-font-size * 0.8

    .right
      .desktop
        .navbar-list
          display flex
          gap 24px
          align-items center

          +redefine-tablet()
            display none

          .navbar-item
            float left
            // padding 5px
            position relative
            font-size 1rem
            font-weight 450
            cursor pointer
            color var(--default-text-color)

            a
              display block
              padding 5px

            a .fa-chevron-down
              transform rotate(0deg)
              transition transform 0.3s ease

            &:hover a .fa-chevron-down
              transform rotate(180deg)

            &:hover .has-dropdown
              &::after
                display none !important

            &:hover a, .active
              &::after
                content ''
                position absolute
                bottom -5px
                left 50%
                width 100%
                height 2px
                transform translateX(-50%)
                border-radius $redefine-border-radius-large
                background var(--primary-color)
                transition-t('transform, bottom', '0, 0', '0.2, 0.2', 'linear, linear')

                .navbar-shrink &
                  bottom -($navbar-shrink-height / 2 - 17)

            &.search
              font-size $desktop-search-icon-font-size
              margin-left 26px

              i
                color var(--default-text-color)

            .sub-menu
              position absolute
              right auto
              left 50%
              -webkit-transform translate(-50%, 0)
              -o-transform translate(-50%, 0)
              transform translate(-50%, 0)
              margin-top 0px
              width auto
              text-align center
              list-style none
              padding 0 10px
              border-radius $redefine-border-radius-large
              // visibility hidden
              max-height 0px
              overflow hidden
              transition-t('all', '0', '0.2', 'linear')

              li a
                white-space nowrap
                color var(--default-text-color)
                font-size 1rem
                padding 3px 15px
                display block
                text-align center
                border-radius 8px
                transition-t('all', '0', '0.2', 'linear')

                &:hover
                  color var(--primary-color)
                  background-color var(--third-background-color)

        .navbar-list .navbar-item:hover .sub-menu
          // visibility visible
          max-height 500px
          transition-t('all', '0', '0.2', 'ease')
          redefine-container(
            false,
            0,
            0,
            10px,
            5px
          )

      .mobile
        display flex
        justify-content space-between
        align-items center

        .icon-item
          display none
          position relative
          cursor pointer
          font-size 18px
          margin-left 12px
          width 20px
          height 20px
          color var(--default-text-color)

          i
            color var(--default-text-color)

          &:first-child
            margin-left 0

          +redefine-tablet()
            display flex
            justify-content center
            align-items center

        .navbar-bar
          .navbar-bar-middle
            width 18px
            height $navbar-bar-line-height
            position relative
            background var(--default-text-color)

            .navbar-drawer-show &
              background transparent

            &::before, &::after
              content ''
              position absolute
              left 0
              width 100%
              height $navbar-bar-line-height
              background var(--default-text-color)
              transition-t('transform', '0', '0.38', 'ease')

            &::before
              top -6px

              .navbar-drawer-show &
                transform translateY(6px) rotate(45deg)

            &::after
              bottom -6px

              .navbar-drawer-show &
                transform translateY(-6px) rotate(-45deg)

  .navbar-drawer
    padding $navbar-height 0 20px 0
    transform scaleY(0)
    transform-origin top
    z-index $z-index-2
    opacity 0
    transition-t('transform,opacity', '0,0.1', '0.38,0.38', 'ease,ease')

    .navbar-drawer-show &
      transform scaleY(1)
      opacity 1

  .window-mask
    position absolute
    top 0
    width 100%
    height 100vh
    background rgba(0, 0, 0, 0.4)
    z-index $z-index-1
    visibility hidden
    opacity 0
    transition-t('transform, opacity', '0, 0', '0.38, 0.38', 'ease, ease')

    .navbar-drawer-show &
      visibility visible
      opacity 1

.navbar-drawer-show
  overflow hidden

        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="post-page-container">
    <div class="article-content-container">

        <div class="article-title">
            
                <h1 class="article-title-regular">AI 开发技法</h1>
            
            </div>
            
                    
        
        
            <div class="article-header flex flex-row gap-2 items-center">
                <div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
                    <img src="/images/redefine-avatar.svg">
                </div>
                <div class="info flex flex-col justify-between">
                    <div class="author flex items-center">
                        <span class="name text-default-text-color text-lg font-semibold">Edward YC</span>
                        
                            <span class="author-label ml-1.5 text-xs px-2 py-0.5 rounded-small text-third-text-color border border-shadow-color-1">Lv2</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2026-01-20 14:37:17</span>
        <span class="mobile">2026-01-20 14:37:17</span>
        <span class="hover-info">Created</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2026-01-22 09:55:45</span>
            <span class="mobile">2026-01-22 09:55:45</span>
            <span class="hover-info">Updated</span>
        </span>
    

    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/AI%E3%80%81JAVA/">AI、JAVA</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>5.5k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>22 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        


        <div class="article-content markdown-body">
            <h1 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h1><p>本文档记录使用 LLM 的 AI 开发相关的技术总览，构建完整的 AI 开发流程。涉及到 LLM 的调用、基于 SpringAI 或者 LangChain4j 的具体 AI 开发。其中通过 Advisor、Prompt 和 RAG 来辅助和强化模型的能力。</p>
<ul>
<li>AI 大模型接入<ul>
<li>SDK</li>
<li>http</li>
<li>Spring AI or LangChain4j</li>
</ul>
</li>
<li>Prompt 工程<ul>
<li>基本概念</li>
<li>优化策略</li>
</ul>
</li>
<li>AI 应用方案设计<ul>
<li>ChatClient</li>
<li>Advisors</li>
</ul>
</li>
</ul>
<h1 id="AI-大模型接入"><a href="#AI-大模型接入" class="headerlink" title="AI 大模型接入"></a>AI 大模型接入</h1><h2 id="使用大模型的-2-种途径"><a href="#使用大模型的-2-种途径" class="headerlink" title="使用大模型的 2 种途径"></a>使用大模型的 2 种途径</h2><h3 id="1、云服务"><a href="#1、云服务" class="headerlink" title="1、云服务"></a>1、云服务</h3><p>直接使用云服务商在云端已经部署好的大模型服务，无需自己考虑基础设施（比如服务器、GPU 算力），特点：使用方便维护成本低，具有更完善的安全措施和合规保障。</p>
<h3 id="2、自部署"><a href="#2、自部署" class="headerlink" title="2、自部署"></a>2、自部署</h3><p>开发者在本地或者私有云部署开源大模型，特点是数据安全，无网络延迟。</p>
<p>本地使用开源项目 Ollama 快速安装大模型，<a class="link"   target="_blank" rel="noopener" href="https://ollama.com/" >官方文档 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。对于 API 调用和各种应用程序的继承问题可以参考 <a class="link"   target="_blank" rel="noopener" href="https://github.com/ollama/ollama/blob/main/docs/api.md" >Github 文档 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。</p>
<p>1）首先下载安装 Ollama，并安装其命令行工具：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768984538407.png"
                      alt="1768984538407"
                ></p>
<p>2）安装完成后，打开终端执行 <code>ollama --help</code> 可以查看用法；</p>
<p>3）进入到 <a class="link"   target="_blank" rel="noopener" href="https://ollama.com/search" >Ollama 官网的模型广场 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 中，挑选模型；</p>
<p>4）选中某个模型后，支持切换模型版本，建议刚开始选择小模型，安装速度更快，对硬件要求低（推荐 gemma3）；</p>
<p>5）执行 ollama 命令来快速安装并运行大模型，如 <code>ollama run gemma3:1b</code></p>
<p>6）安装完成后，即可在终端与大模型对话</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768984881973.png"
                      alt="1768984881973"
                ></p>
<h2 id="接入大模型的-3-种方式"><a href="#接入大模型的-3-种方式" class="headerlink" title="接入大模型的 3 种方式"></a>接入大模型的 3 种方式</h2><h3 id="1、AI-应用平台接入"><a href="#1、AI-应用平台接入" class="headerlink" title="1、AI 应用平台接入"></a>1、AI 应用平台接入</h3><p>国内比较著名且方便的平台有 <a class="link"   target="_blank" rel="noopener" href="https://bailian.console.aliyun.com/" >阿里云百炼 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 和字节的 <a class="link"   target="_blank" rel="noopener" href="https://www.volcengine.com/product/ark" >火山引擎 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 。这种一站式的大模型开发及应用构建平台提供了从模型调用到应用构建的全流程支持。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768895132048.png"
                      alt="1768895132048"
                ></p>
<p>此外，还提供了知识库管理、应用评测、应用观测等功能，可以快速构建只能客服等应用。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768897394137.png"
                      alt="1768897394137"
                ></p>
<p>同时，针对阿里的产品还有一个 —— <a class="link"   target="_blank" rel="noopener" href="https://cn.aliyun.com/product/dashscope?from_alibabacloud=" >模型服务灵积 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> （DashScope），是模型 API 接口，在底层开发时使用dashscope进行开发。</p>
<p>在使用平台的时候，可以创建智能体应用或者工作应用进行模型的使用，智能体应用的特点是可以预设 Prompt，然后再结合一些知识库检索等功能。而工作流应用是定义一个输入到输出的链式流程，可以更清晰的控制中间流程，提高逻辑性。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768898007203.png"
                      alt="1768898007203"
                ></p>
<h3 id="2、AI-软件客户端接入"><a href="#2、AI-软件客户端接入" class="headerlink" title="2、AI 软件客户端接入"></a>2、AI 软件客户端接入</h3><ol>
<li><a class="link"   target="_blank" rel="noopener" href="https://www.cherry-ai.com/" >Cherry Studio <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>：一款集多模型对话、知识库管理、AI 绘画、翻译等功能于一体的全能 AI 助手平台。Cherry Studion 提供高度自定义的设计、强大的扩展能力和友好的用户体验。</li>
<li><a class="link"   target="_blank" rel="noopener" href="https://cursor.com/cn" >Cursor <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>：以 AI 为核心的编程开发工具，可以快速生成项目代码、理解整个代码库并提供智能建议。</li>
</ol>
<h3 id="3、程序接入"><a href="#3、程序接入" class="headerlink" title="3、程序接入"></a>3、程序接入</h3><ol>
<li>直接调用 AI 大模型，比如调用 DeepSeek（更原生）</li>
<li>调用 AI 大模型平台创建的应用或者智能体（更方便）</li>
</ol>
<p>对于第一种方式，可以使用特定平台提供的 SDK 或者 API，参考平台的文档来接入；也可以使用 AI 开发框架，比如 Spring AI、Spring AI Alibaba、LangChain4j 等自主选择大模型进行调用，可以在 application.yml 中配置大模型而不修改代码。</p>
<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">ai:</span></span><br><span class="line">    <span class="attr">dashscope:</span></span><br><span class="line">      <span class="attr">api-key:</span> <span class="string">$&#123;AI_DASHSCOPE_API_KEY&#125;</span></span><br><span class="line">      <span class="attr">chat:</span></span><br><span class="line">	<span class="attr">options:</span></span><br><span class="line">	<span class="attr">model:</span> <span class="string">deepseek-r1</span></span><br></pre></td></tr></table></figure></div>

<p>对于第二种方式，一般只能使用特定平台提供的 SDK 或者 API， 参考 <a class="link"   target="_blank" rel="noopener" href="https://help.aliyun.com/zh/model-studio/spring-ai-alibaba-integrate-llm-application" >平台的文档 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 来接入，每个大模型服务平台的代码都不一样。</p>
<h2 id="程序调用-AI-大模型"><a href="#程序调用-AI-大模型" class="headerlink" title="程序调用 AI 大模型"></a>程序调用 AI 大模型</h2><p>在实际开发中，有多种方式可以在应用程序中调用 AI 大模型。</p>
<ol>
<li>SDK 接入：使用官方提供的软件开发工具包，最直接的集成方式；</li>
<li>HTTP 接入：通过 REST API 直接发送 HTTP 请求调用模型；</li>
<li>Spring AI：基于 Spring 生态系统的 AI 框架，更方便地接入大模型；</li>
<li>LangChain4j：专注于构建 LLM 应用的 Java 框架，提供丰富的 AI 调用组件。</li>
</ol>
<h3 id="1、SDK-接入"><a href="#1、SDK-接入" class="headerlink" title="1、SDK 接入"></a>1、SDK 接入</h3><p>SDK（Software Development Kit，软件开发工具包）是官方提供的最直接的集成方式，通常提供了完善的类型支持和错误处理机制。</p>
<p>1）首先需要按照官方文档安装 SDK：<a class="link"   target="_blank" rel="noopener" href="https://help.aliyun.com/zh/model-studio/install-sdk" >安装 SDK 官方指南 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p>在选择 SDK 版本时，建议在 Maven 仓库查看最新的版本号：<a class="link"   target="_blank" rel="noopener" href="https://mvnrepository.com/artifact/com.alibaba/dashscope-sdk-java" >Maven 中央仓库版本信息 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p>在 pom.xml 中引入依赖：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/dashscope-sdk-java --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dashscope-sdk-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.19.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>2）在大模型平台申请一个 API Key</p>
<p>3）项目中新建 demo.invoke 包，集中存放调用 AI 大模型的示例代码，<a class="link"   target="_blank" rel="noopener" href="https://help.aliyun.com/zh/model-studio/qwen-api-reference#ab9194e9a55dk" >参考文档 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p>为了安全管理 API 密钥，创建一个接口类来存储密钥信息（在实际生产环境中，使用应用配置文件或者环境变量，注意密钥不要上传到 git 仓库）：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TestApiKey</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">API_KEY</span> <span class="operator">=</span> <span class="string">&quot;你的 API Key&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>使用 SDK 调用模型的完整示例代码：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 建议dashscope SDK的版本 &gt;= 2.12.0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.lang.System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.aigc.generation.Generation;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.aigc.generation.GenerationParam;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.aigc.generation.GenerationResult;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.common.Message;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.common.Role;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.exception.ApiException;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.exception.InputRequiredException;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.exception.NoApiKeyException;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.utils.JsonUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SdkAiInvoke</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> GenerationResult <span class="title function_">callWithMessage</span><span class="params">()</span> <span class="keyword">throws</span> ApiException, NoApiKeyException, InputRequiredException &#123;</span><br><span class="line">        <span class="type">Generation</span> <span class="variable">gen</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Generation</span>();</span><br><span class="line">        <span class="type">Message</span> <span class="variable">systemMsg</span> <span class="operator">=</span> Message.builder()</span><br><span class="line">                .role(Role.SYSTEM.getValue())</span><br><span class="line">                .content(<span class="string">&quot;You are a helpful assistant.&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">        <span class="type">Message</span> <span class="variable">userMsg</span> <span class="operator">=</span> Message.builder()</span><br><span class="line">                .role(Role.USER.getValue())</span><br><span class="line">                .content(<span class="string">&quot;你是谁？&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">        <span class="type">GenerationParam</span> <span class="variable">param</span> <span class="operator">=</span> GenerationParam.builder()</span><br><span class="line">                <span class="comment">// 若没有配置环境变量，请用百炼API Key将下行替换为：.apiKey(&quot;sk-xxx&quot;)</span></span><br><span class="line">                .apiKey(TestApiKey.API_KEY)</span><br><span class="line">                <span class="comment">// 此处以qwen-plus为例，可按需更换模型名称。模型列表：https://help.aliyun.com/zh/model-studio/getting-started/models</span></span><br><span class="line">                .model(<span class="string">&quot;qwen-plus&quot;</span>)</span><br><span class="line">                .messages(Arrays.asList(systemMsg, userMsg))</span><br><span class="line">                .resultFormat(GenerationParam.ResultFormat.MESSAGE)</span><br><span class="line">                .build();</span><br><span class="line">        <span class="keyword">return</span> gen.call(param);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">GenerationResult</span> <span class="variable">result</span> <span class="operator">=</span> callWithMessage();</span><br><span class="line">            System.out.println(JsonUtils.toJson(result));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ApiException | NoApiKeyException | InputRequiredException e) &#123;</span><br><span class="line">            <span class="comment">// 使用日志框架记录异常信息</span></span><br><span class="line">            System.err.println(<span class="string">&quot;An error occurred while calling the generation service: &quot;</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        System.exit(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>4）运行项目，成功看到 AI 的回复：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768962173256.png"
                      alt="1768962173256"
                ></p>
<h3 id="2、HTTP-接入"><a href="#2、HTTP-接入" class="headerlink" title="2、HTTP 接入"></a>2、HTTP 接入</h3><p>对于 SDK 不支持的编程语言或需要更灵活控制的场景，可以直接使用 HTTP 请求调用 AI 大模型的 API。</p>
<p>优先级：SDK &gt; HTTP</p>
<p>HTTP 调用的详细说明可<a class="link"   target="_blank" rel="noopener" href="https://help.aliyun.com/zh/model-studio/qwen-api-reference#b1320a1664b9a" >参考官方文档 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>：</p>
<div class="highlight-container" data-rel="Http"><figure class="iseeu highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions \</span><br><span class="line">-H &quot;Authorization: Bearer $DASHSCOPE_API_KEY&quot; \</span><br><span class="line">-H &quot;Content-Type: application/json&quot; \</span><br><span class="line">-d &#x27;&#123;</span><br><span class="line">    &quot;model&quot;: &quot;qwen-plus&quot;,</span><br><span class="line">    &quot;messages&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;role&quot;: &quot;system&quot;,</span><br><span class="line">            &quot;content&quot;: &quot;You are a helpful assistant.&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;role&quot;: &quot;user&quot;,</span><br><span class="line">            &quot;content&quot;: &quot;你是谁？&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;&#x27;</span><br></pre></td></tr></table></figure></div>

<p>测试代码：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HttpAiInvoke</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 替换为你的实际 API 密钥</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置请求头</span></span><br><span class="line">        Map&lt;String, String&gt; headers = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        headers.put(<span class="string">&quot;Authorization&quot;</span>, <span class="string">&quot;Bearer &quot;</span> + TestApiKey.API_KEY);</span><br><span class="line">        headers.put(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置请求体</span></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">requestBody</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        requestBody.put(<span class="string">&quot;model&quot;</span>, <span class="string">&quot;qwen-plus&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        JSONObject[] messages = <span class="keyword">new</span> <span class="title class_">JSONObject</span>[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">systemMessage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        systemMessage.put(<span class="string">&quot;role&quot;</span>, <span class="string">&quot;system&quot;</span>);</span><br><span class="line">        systemMessage.put(<span class="string">&quot;content&quot;</span>, <span class="string">&quot;You are a helpful assistant.&quot;</span>);</span><br><span class="line">        messages[<span class="number">0</span>] = systemMessage;</span><br><span class="line"></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">userMessage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        userMessage.put(<span class="string">&quot;role&quot;</span>, <span class="string">&quot;user&quot;</span>);</span><br><span class="line">        userMessage.put(<span class="string">&quot;content&quot;</span>, <span class="string">&quot;你是谁？&quot;</span>);</span><br><span class="line">        messages[<span class="number">1</span>] = userMessage;</span><br><span class="line"></span><br><span class="line">        input.put(<span class="string">&quot;messages&quot;</span>, messages);</span><br><span class="line">        requestBody.put(<span class="string">&quot;input&quot;</span>, input);</span><br><span class="line"></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">parameters</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        parameters.put(<span class="string">&quot;result_format&quot;</span>, <span class="string">&quot;message&quot;</span>);</span><br><span class="line">        requestBody.put(<span class="string">&quot;parameters&quot;</span>, parameters);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 发送请求</span></span><br><span class="line">        <span class="type">HttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> HttpRequest.post(url)</span><br><span class="line">                .addHeaders(headers)</span><br><span class="line">                .body(requestBody.toString())</span><br><span class="line">                .execute();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 处理响应</span></span><br><span class="line">        <span class="keyword">if</span> (response.isOk()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;请求成功，响应内容：&quot;</span>);</span><br><span class="line">            System.out.println(response.body());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;请求失败，状态码：&quot;</span> + response.getStatus());</span><br><span class="line">            System.out.println(<span class="string">&quot;响应内容：&quot;</span> + response.body());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="3、Spring-AI"><a href="#3、Spring-AI" class="headerlink" title="3、Spring AI"></a>3、Spring AI</h3><p>Spring AI 是 Spring 生态系统的新成员，旨在简化 AI 功能与 Spring 应用的集成。</p>
<p>核心特性：</p>
<ol>
<li>跨 AI 供应商的可移植 API 支持，支持所有主流 AI 模型供应商，支持所有主流向量数据库</li>
<li>工具&#x2F;函数调用：允许模型请求执行客户端工具和函数，从而根据必要访问必要的实时信息并采取行动</li>
<li>可观测性：提供与 AI 相关操作的监控信息</li>
<li>文档 ETL 框架</li>
<li>AI 模型评估工具</li>
<li>ChatClient API（*）：与 AI 聊天模型通信的流式 API，用法类似于 WebClient 和 RestClient API</li>
<li>Advisors API（*）：封装常见的生成式 AI 模式，转换发送至语言模型（LLM）和从语言模型返回的数据，并提供跨各种模型和用例的可移植性。</li>
<li>结构化输出（*）：将 AI 模型输出映射到 POJO（普通 Java 对象）</li>
<li>支持聊天对话记忆和检索增强生成（RAG）。</li>
</ol>
<p><a class="link"   target="_blank" rel="noopener" href="https://java2ai.com/docs/overview/" >参考文档Spring Ai Alibaba <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p><a class="link"   target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0-M6.1/tutorials/chat-client/?spm=4347728f.1073474f.0.0.49347982Rt3eMR" >旧版（新版 Spring Ai Alibaba 不支持 ChatClient） <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p>1）引入依赖：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0-M6.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>2）编写配置：</p>
<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">spring-ai-alibaba-qwq-chat-client-example</span></span><br><span class="line">  <span class="attr">ai:</span></span><br><span class="line">    <span class="attr">dashscope:</span></span><br><span class="line">      <span class="attr">api-key:</span> <span class="string">$&#123;AI_DASHSCOPE_API_KEY&#125;</span></span><br><span class="line">      <span class="attr">chat:</span></span><br><span class="line">        <span class="attr">options:</span></span><br><span class="line">          <span class="attr">model:</span> <span class="string">qwen-plus</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<p>3）编写示例代码，注意要注入 dashscopeChatModel：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 取消注释即可在 SpringBoot 项目启动时执行</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringAiAiInvoke</span> <span class="keyword">implements</span> <span class="title class_">CommandLineRunner</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel dashscopeChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">AssistantMessage</span> <span class="variable">output</span> <span class="operator">=</span> dashscopeChatModel.call(<span class="keyword">new</span> <span class="title class_">Prompt</span>(<span class="string">&quot;你好，我是鱼皮&quot;</span>))</span><br><span class="line">                .getResult()</span><br><span class="line">                .getOutput();</span><br><span class="line">        System.out.println(output.getText());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>上述代码实现了 CommandLineRunner 接口，在启动 Spring Boot 项目时，会自动注入大模型 ChatModel 依赖，并且单次执行该类的 run 方法达到测试效果。</p>
<p>（ChatModel 适合简单的对话场景，除了这种以外，Spring AI 还提供 ChatClient 调用方式，提供更多高级功能（比如会话记忆），适合复杂场景）</p>
<h3 id="4、LangChain4j"><a href="#4、LangChain4j" class="headerlink" title="4、LangChain4j"></a>4、LangChain4j</h3><p>和 Spring AI 作用一样，专注于构建基于 LLM 应用的 Java 框架，作为知名 AI 框架 LangChain 的 Java 版本，提供了丰富的工具和抽象层。LangChain 官方没有完全支持国内大模型 <a class="link"   target="_blank" rel="noopener" href="https://docs.langchain4j.dev/integrations/language-models/" >官方文档 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>，可参考 <a class="link"   target="_blank" rel="noopener" href="https://github.com/langchain4j/langchain4j-community/tree/main/models" >社区版本的整合大模型包 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。</p>
<p>1）引入依赖：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/dev.langchain4j/langchain4j-community-dashscope --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>dev.langchain4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>langchain4j-community-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0-beta2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>注意，LangChain4j 也提供了 Spring Boot Starter，方便在 Spring 项目中使用，最新版本号可以在 <a class="link"   target="_blank" rel="noopener" href="https://mvnrepository.com/artifact/dev.langchain4j/langchain4j-community-dashscope" >Maven中央仓库 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 查询。由于此处已经引入了 Spring AI，防止冲突就不再引入。</p>
<p>2）参考 <a class="link"   target="_blank" rel="noopener" href="https://docs.langchain4j.dev/get-started/" >LangChain 官方文档 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 来编写实例对话，创建一个 ChatModel 并调用。</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LangChainAiInvoke</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ChatLanguageModel</span> <span class="variable">qwenModel</span> <span class="operator">=</span> QwenChatModel.builder()</span><br><span class="line">                .apiKey(TestApiKey.API_KEY)</span><br><span class="line">                .modelName(<span class="string">&quot;qwen-max&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">        <span class="type">String</span> <span class="variable">answer</span> <span class="operator">=</span> qwenModel.chat(<span class="string">&quot;我是程序员鱼皮，这是编程导航 codefather.cn 的原创项目教程&quot;</span>);</span><br><span class="line">        System.out.println(answer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="5、Spring-AI-调用-Ollama-大模型"><a href="#5、Spring-AI-调用-Ollama-大模型" class="headerlink" title="5、Spring AI 调用 Ollama 大模型"></a>5、Spring AI 调用 Ollama 大模型</h3><p>1）首先，引入依赖：</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-ollama-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0-M6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>2）填写配置，注意模型为刚刚安装并可用的模型：</p>
<div class="highlight-container" data-rel="Yaml"><figure class="iseeu highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">ai:</span></span><br><span class="line">    <span class="attr">ollama:</span></span><br><span class="line">      <span class="attr">base-url:</span> <span class="string">http://localhost:11434</span></span><br><span class="line">      <span class="attr">chat:</span></span><br><span class="line">        <span class="attr">model:</span> <span class="string">gemma3:1b</span></span><br></pre></td></tr></table></figure></div>

<p>3）在 demo.invoke 包中编写一段测试代码：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 取消注释即可在 SpringBoot 项目启动时执行</span></span><br><span class="line"><span class="comment">//@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OllamaAiInvoke</span> <span class="keyword">implements</span> <span class="title class_">CommandLineRunner</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel ollamaChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">AssistantMessage</span> <span class="variable">output</span> <span class="operator">=</span> ollamaChatModel.call(<span class="keyword">new</span> <span class="title class_">Prompt</span>(<span class="string">&quot;你好，我是鱼皮&quot;</span>))</span><br><span class="line">                .getResult()</span><br><span class="line">                .getOutput();</span><br><span class="line">        System.out.println(output.getText());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="Prompt-工程"><a href="#Prompt-工程" class="headerlink" title="Prompt 工程"></a>Prompt 工程</h1><p>Prompt 工程又叫提示词工程，就是输入给 AI 的指令。提示词的质量直接影响到 AI 大模型输出的结果。在 AI 应用开发的时候，涉及到的技术有各种 Prompt 的优化，Advisor，对话记忆持久化，RAG 等多种技术。在我看来，<strong>这些技术的核心都是在根据用户的user prompt 进行各种优化来增强查询的效率和准确度</strong>，也可能会涉及到降低或者增加费用的情况。</p>
<h2 id="提示词分类"><a href="#提示词分类" class="headerlink" title="提示词分类"></a>提示词分类</h2><h3 id="核心-基于角色的分类"><a href="#核心-基于角色的分类" class="headerlink" title="核心 - 基于角色的分类"></a>核心 - 基于角色的分类</h3><p>在 AI 对话中，基于角色的分类是最常见的，通常存在 3 种主要类型的 Prompt：</p>
<p>1）User Prompt：用户向 AI 提供的实际问题、指令或信息，如</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">用户：帮我写一个使用 python 实现的 KMeans 代码</span><br></pre></td></tr></table></figure></div>

<p>2）System Prompt：设置 AI 模型行为规则和角色定位的隐藏指令，用户通常看不到，类似于系统给 AI 设定人格和能力边界</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">系统：你是一位经验丰富的恋爱顾问，擅长分析情感问题并提供建设性建议。请以温暖友善的语气回答用户的恋爱困惑，必要时主动询问更多信息以便提供更准确的建议。不要做出道德判断，而是尊重用户的情感体验并提供实用的沟通和相处技巧。回答时保持专业性，但避免使用过于学术的术语，确保普通用户能够理解你的建议。</span><br></pre></td></tr></table></figure></div>

<p>3）Assistant Prompt：在多轮对话种，之前的 AI 模型回复的话会作为上下文的一部分影响后续对话的理解和生成。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768987380425.png"
                      alt="1768987380425"
                ></p>
<h3 id="扩展知识-基于功能的分类"><a href="#扩展知识-基于功能的分类" class="headerlink" title="扩展知识 - 基于功能的分类"></a>扩展知识 - 基于功能的分类</h3><p>1、指令型提示词（明确任务）</p>
<p>2、对话型提示词（自然对话）</p>
<p>3、创意型提示词（引导创作故事）</p>
<p>4、角色扮演型提示词（类似用户预设 System Prompt）</p>
<p>5、少样本学习提示词：提供一些示例，引导 AI 理解所需的输出格式和风格。</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">将以下句子改写为正式商务语言：</span><br><span class="line">示例1：</span><br><span class="line">原句：这个想法不错。</span><br><span class="line">改写：该提案展现了相当的潜力和创新性。</span><br><span class="line"></span><br><span class="line">示例2：</span><br><span class="line">原句：我们明天见。</span><br><span class="line">改写：期待明日与您会面，继续我们的商务讨论。</span><br><span class="line"></span><br><span class="line">现在请改写：这个价格太高了。</span><br></pre></td></tr></table></figure></div>

<h3 id="扩展知识-基于复杂度的分类"><a href="#扩展知识-基于复杂度的分类" class="headerlink" title="扩展知识 - 基于复杂度的分类"></a>扩展知识 - 基于复杂度的分类</h3><p>1、简单提示词</p>
<p>2、复合提示词</p>
<p>3、链式提示词（一系列连续的、相互依赖的提示词，有一点工作流应用的意味）</p>
<p>4、模板提示词（包含可替换变量的标准化提示词结构，常用于大规模应用）</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">你是一位专业的&#123;领域&#125;专家。请回答以下关于&#123;主题&#125;的问题：&#123;具体问题&#125;。</span><br><span class="line">回答应包含&#123;要点数量&#125;个关键点，并使用&#123;风格&#125;的语言风格。</span><br></pre></td></tr></table></figure></div>

<h2 id="Token"><a href="#Token" class="headerlink" title="Token"></a>Token</h2><p>不同模型对 Token 的计算规则不一样，也并非完全按照汉字或者字母个数去划定，需要估算或使用<a class="link"   target="_blank" rel="noopener" href="https://tiktoken.aigc2d.com/" >计算工具 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。</p>
<h3 id="Token-成本优化技巧"><a href="#Token-成本优化技巧" class="headerlink" title="Token 成本优化技巧"></a>Token 成本优化技巧</h3><p>1、精简系统提示词</p>
<p>2、定期清理对话历史</p>
<p>3、使用向量检索代替直接输入（RAG）</p>
<p>4、结构化替代自然语言</p>
<p>优化前：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请问如何制作披萨？首先需要准备面粉、酵母、水、盐、橄榄油作为基础面团材料。然后根据口味选择酱料，可以是番茄酱或白酱。接着准备奶酪，最常用的是马苏里拉奶酪。最后准备各种配料如意大利香肠、蘑菇、青椒等。</span><br></pre></td></tr></table></figure></div>

<p>优化后：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">披萨制作材料：</span><br><span class="line">- 面团：面粉、酵母、水、盐、橄榄油</span><br><span class="line">- 酱料：番茄酱/白酱</span><br><span class="line">- 奶酪：马苏里拉</span><br><span class="line">- 配料：意大利香肠、蘑菇、青椒等</span><br><span class="line"></span><br><span class="line">如何制作？</span><br></pre></td></tr></table></figure></div>

<h2 id="Prompt-优化技巧"><a href="#Prompt-优化技巧" class="headerlink" title="Prompt 优化技巧"></a>Prompt 优化技巧</h2><h3 id="学习资源"><a href="#学习资源" class="headerlink" title="学习资源"></a>学习资源</h3><h4 id="1、Prompt-学习"><a href="#1、Prompt-学习" class="headerlink" title="1、Prompt 学习"></a>1、Prompt 学习</h4><ul>
<li><a class="link"   target="_blank" rel="noopener" href="https://www.promptingguide.ai/zh" >Prompt Engineering Guide 提示词工程指南 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></li>
<li><a class="link"   target="_blank" rel="noopener" href="https://platform.openai.com/docs/guides/prompt-engineering" >OpenAI 提示词工程指南 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></li>
<li><a class="link"   target="_blank" rel="noopener" href="https://docs.spring.io/spring-ai/reference/api/prompt.html#_prompt_engineering" >Spring AI 提示词工程指南 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></li>
<li><a class="link"   target="_blank" rel="noopener" href="https://claude.com/app-unavailable-in-region" >Authropic 提示词工程指南 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></li>
<li><a class="link"   target="_blank" rel="noopener" href="https://github.com/anthropics/prompt-eng-interactive-tutorial" >Authropic 提示词工程指南（开源仓库） <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></li>
<li><a class="link"   target="_blank" rel="noopener" href="https://open.bigmodel.cn/dev/guidelines/LanguageModels" >智谱 AI Prompt 设计指南 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></li>
</ul>
<h4 id="2、Prompt-提示词库"><a href="#2、Prompt-提示词库" class="headerlink" title="2、Prompt 提示词库"></a>2、Prompt 提示词库</h4><ul>
<li>文本对话：<a class="link"   target="_blank" rel="noopener" href="https://claude.com/app-unavailable-in-region" >Authropic 提示词库 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></li>
<li>AI 绘画：<a class="link"   target="_blank" rel="noopener" href="https://promptlibrary.org/" >Midjourney 提示词库 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></li>
</ul>
<h3 id="基础提示技巧"><a href="#基础提示技巧" class="headerlink" title="基础提示技巧"></a>基础提示技巧</h3><p>1、明确指定任务和角色（写好 System Prompt）</p>
<p>2、提供详细说明和具体实例（提供足够的上下文和期望输出格式示例）、</p>
<p>3、使用结构化格式引导思维</p>
<p>4、明确输出格式要求</p>
<h3 id="进阶提示技巧"><a href="#进阶提示技巧" class="headerlink" title="进阶提示技巧"></a>进阶提示技巧</h3><p>1、思维链提示法</p>
<p>2、少样本学习</p>
<p>3、分步骤指导</p>
<p>4、自我评估和修正</p>
<p>5、知识检索和引用</p>
<p>6、多视角分析</p>
<p>7、多模态思维</p>
<h3 id="提示词调试与优化"><a href="#提示词调试与优化" class="headerlink" title="提示词调试与优化"></a>提示词调试与优化</h3><p>1、迭代式提示优化</p>
<p>2、边界测试</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">尝试解决以下具有挑战性的数学问题:</span><br><span class="line">证明在三角形中，三条高的交点、三条中线的交点和三条角平分线的交点在同一条直线上。</span><br><span class="line"></span><br><span class="line">如果你发现难以直接证明:</span><br><span class="line">1. 说明你遇到的具体困难</span><br><span class="line">2. 考虑是否有更简单的方法或特例可以探讨</span><br><span class="line">3. 提供一个思路框架，即使无法给出完整证明</span><br></pre></td></tr></table></figure></div>

<p>3、提示词模板化</p>
<p>4、错误分析与修正</p>
<h1 id="AI-应用方案设计"><a href="#AI-应用方案设计" class="headerlink" title="AI 应用方案设计"></a>AI 应用方案设计</h1><p>AI 应用方案设计的 2 个核心：</p>
<ul>
<li>系统提示词的设计</li>
<li>多轮对话的实现</li>
</ul>
<h2 id="1、系统提示词设计"><a href="#1、系统提示词设计" class="headerlink" title="1、系统提示词设计"></a>1、系统提示词设计</h2><p>巧思：让 AI 帮助优化系统提示词</p>
<h2 id="2、多轮对话实现"><a href="#2、多轮对话实现" class="headerlink" title="2、多轮对话实现"></a>2、多轮对话实现</h2><p>要实现具有“记忆力”的 AI 应用，让 AI 能够记住用户之前的对话内容并保持上下文连贯性，可以使用 Spring AI 框架的 <strong>对话记忆能力</strong>。</p>
<h3 id="ChatClient-特性"><a href="#ChatClient-特性" class="headerlink" title="ChatClient 特性"></a>ChatClient 特性</h3><p>相较于 ChatModel，ChatClient 支持更复杂灵活的链式调用（Fluent API）:</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基础用法</span></span><br><span class="line"><span class="type">ChatResponse</span> <span class="variable">response</span> <span class="operator">=</span> chatModel.call(<span class="keyword">new</span> <span class="title class_">Prompt</span>(<span class="string">&quot;你好&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 高级用法</span></span><br><span class="line"><span class="type">ChatClient</span> <span class="variable">chatClient</span> <span class="operator">=</span> ChatClient.builder(chatModel)</span><br><span class="line">	.defaultSystem(<span class="string">&quot;你是恋爱顾问&quot;</span>)</span><br><span class="line">	.build();</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">response</span> <span class="operator">=</span> chatClient.prompt().user(<span class="string">&quot;你好&quot;</span>).call().content();</span><br></pre></td></tr></table></figure></div>

<p>Spring AI 提供了多种构建 ChatClient 的方式，比如自动注入、通过建造者模式手动构造：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式1：使用构造器注入</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChatService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ChatClient chatClient;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ChatService</span><span class="params">(ChatClient.Builder builder)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.chatClient = builder</span><br><span class="line">            .defaultSystem(<span class="string">&quot;你是恋爱顾问&quot;</span>)</span><br><span class="line">            .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式2：使用建造者模式</span></span><br><span class="line"><span class="type">ChatClient</span> <span class="variable">chatClient</span> <span class="operator">=</span> ChatClient.builder(chatModel)</span><br><span class="line">    .defaultSystem(<span class="string">&quot;你是恋爱顾问&quot;</span>)</span><br><span class="line">    .build();</span><br></pre></td></tr></table></figure></div>

<p>ChatClient 支持多种响应格式，比如返回 ChatResponse 对象，返回实体对象、流式返回：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ChatClient支持多种响应格式</span></span><br><span class="line"><span class="comment">// 1. 返回 ChatResponse 对象（包含元数据如 token 使用量）</span></span><br><span class="line"><span class="type">ChatResponse</span> <span class="variable">chatResponse</span> <span class="operator">=</span> chatClient.prompt()</span><br><span class="line">    .user(<span class="string">&quot;Tell me a joke&quot;</span>)</span><br><span class="line">    .call()</span><br><span class="line">    .chatResponse();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 返回实体对象（自动将 AI 输出映射为 Java 对象）</span></span><br><span class="line"><span class="comment">// 2.1 返回单个实体</span></span><br><span class="line"><span class="keyword">record</span> <span class="title class_">ActorFilms</span><span class="params">(String actor, List&lt;String&gt; movies)</span> &#123;&#125;</span><br><span class="line"><span class="type">ActorFilms</span> <span class="variable">actorFilms</span> <span class="operator">=</span> chatClient.prompt()</span><br><span class="line">    .user(<span class="string">&quot;Generate the filmography for a random actor.&quot;</span>)</span><br><span class="line">    .call()</span><br><span class="line">    .entity(ActorFilms.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.2 返回泛型集合</span></span><br><span class="line">List&lt;ActorFilms&gt; multipleActors = chatClient.prompt()</span><br><span class="line">    .user(<span class="string">&quot;Generate filmography for Tom Hanks and Bill Murray.&quot;</span>)</span><br><span class="line">    .call()</span><br><span class="line">    .entity(<span class="keyword">new</span> <span class="title class_">ParameterizedTypeReference</span>&lt;List&lt;ActorFilms&gt;&gt;() &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 流式返回（适用于打字机效果）</span></span><br><span class="line">Flux&lt;String&gt; streamResponse = chatClient.prompt()</span><br><span class="line">    .user(<span class="string">&quot;Tell me a story&quot;</span>)</span><br><span class="line">    .stream()</span><br><span class="line">    .content();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 也可以流式返回ChatResponse</span></span><br><span class="line">Flux&lt;ChatResponse&gt; streamWithMetadata = chatClient.prompt()</span><br><span class="line">    .user(<span class="string">&quot;Tell me a story&quot;</span>)</span><br><span class="line">    .stream()</span><br><span class="line">    .chatResponse();</span><br></pre></td></tr></table></figure></div>

<p>可以给 ChatClient 设置默认参数，比如系统提示词，还可以在对话时动态更改系统提示词的变量，类似模板的概念：</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义默认系统提示词</span></span><br><span class="line"><span class="type">ChatClient</span> <span class="variable">chatClient</span> <span class="operator">=</span> ChatClient.builder(chatModel)</span><br><span class="line">        .defaultSystem(<span class="string">&quot;You are a friendly chat bot that answers question in the voice of a &#123;voice&#125;&quot;</span>)</span><br><span class="line">        .build();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对话时动态更改系统提示词的变量</span></span><br><span class="line">chatClient.prompt()</span><br><span class="line">        .system(sp -&gt; sp.param(<span class="string">&quot;voice&quot;</span>, voice))</span><br><span class="line">        .user(message)</span><br><span class="line">        .call()</span><br><span class="line">        .content());</span><br></pre></td></tr></table></figure></div>

<p>此外，还支持指定默认对话选项、默认拦截器、默认函数调用等等。</p>
<h3 id="Advisors"><a href="#Advisors" class="headerlink" title="Advisors"></a>Advisors</h3><p>Spring AI 使用 <a class="link"   target="_blank" rel="noopener" href="https://docs.spring.io/spring-ai/reference/api/advisors.html" >Advisors <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 机制来增强 AI 的能力，在调用 AI 前和调用 AI 后可以执行一些额外的操作，比如：</p>
<ul>
<li>前置增强：调用 AI 前改写 Prompt 提示词、检查一下提示词是否安全</li>
<li>后置增强：调用 AI 后记录一下日志、处理一下返回结果</li>
</ul>
<p>用法很简单（鱼皮类比为拦截器），可以直接为 ChatClient 指定默认拦截器，比如对话记忆拦截器 MessageChatMemoryAdvisor 可以帮助我们实现多轮对话能力，省去自己维护对话列表的麻烦。</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">chatClient</span> <span class="operator">=</span> ChatClient.builder(chatModel)</span><br><span class="line">    .defaultAdvisors(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MessageChatMemoryAdvisor</span>(chatMemory), <span class="comment">// 对话记忆 advisor</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">QuestionAnswerAdvisor</span>(vectorStore)    <span class="comment">// RAG 检索增强 advisor</span></span><br><span class="line">    )</span><br><span class="line">    .build();</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">response</span> <span class="operator">=</span> <span class="built_in">this</span>.chatClient.prompt()</span><br><span class="line">    <span class="comment">// 对话时动态设定拦截器参数，比如指定对话记忆的 id 和长度</span></span><br><span class="line">    .advisors(advisor -&gt; advisor.param(<span class="string">&quot;chat_memory_conversation_id&quot;</span>, <span class="string">&quot;678&quot;</span>)</span><br><span class="line">            .param(<span class="string">&quot;chat_memory_response_size&quot;</span>, <span class="number">100</span>))</span><br><span class="line">    .user(userText)</span><br><span class="line">    .call()</span><br><span class="line">	.content();</span><br></pre></td></tr></table></figure></div>

<p>Advisors 的原理如下：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1768994593838.png"
                      alt="1768994593838"
                ></p>
<p>原理解释：</p>
<ol>
<li>Spring AI 框架从用户的 Prompt 创建一个 AdvisedRequest，同时创建一个空的 AdvisorContext 对象，用于传递信息；</li>
<li>链中每个 advisor 处理这个请求，可能对其进行修改。或者，可以选择不调用下一个实体来阻止请求继续传递，这时该 advisor 负责 填充响应内容；</li>
<li>由框架提供的最终 advisor 将请求发送给聊天模型 ChatModel；</li>
<li>聊天模型的响应随后通过 advisor 链传回，并被转换为 AdvisedResponse。后者包含了共享的 AdvisorContext 实例；</li>
<li>每个 advisor 都可以处理或者修改这个响应；</li>
<li>最终的 AdvisedResponse 通过提取 ChatCompletion 返回给客户端。</li>
</ol>
<p>实际开发中，可以使用多个 advisor，组合在一起相当于一条拦截器链条。每个拦截器是有顺序的，通过 <code>getOrder()</code> 方法获取到顺序，值越低优先级越高。如下面代码并不是按照写入的顺序决定，而是根据 <code>getOrder()</code> 决定。</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">chatClient</span> <span class="operator">=</span> ChatClient.builder(chatModel)</span><br><span class="line">    .defaultAdvisors(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MessageChatMemoryAdvisor</span>(chatMemory), <span class="comment">// 对话记忆 advisor</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">QuestionAnswerAdvisor</span>(vectorStore)    <span class="comment">// RAG 检索增强 advisor</span></span><br><span class="line">    )</span><br><span class="line">    .build();</span><br></pre></td></tr></table></figure></div>

<p>Advisor 类图如下：<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1769044018902.png"
                      alt="1769044018902"
                ></p>
<p>从上图中可以发现，Advisors 分为 2 种模式：Streaming 和 Non-Streaming，二者在用法上没有明显区别但是在返回值上有所不同。当需要自主实现 Advisors 时，需要保证实现两种方法。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image/AI-%E5%BC%80%E5%8F%91%E6%8A%80%E6%B3%95/1769044961293.png"
                      alt="1769044961293"
                ></p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li><strong>Title:</strong> AI 开发技法</li>
        <li><strong>Author:</strong> Edward YC</li>
        <li><strong>Created at
                :</strong> 2026-01-20 14:37:17</li>
        
            <li>
                <strong>Updated at
                    :</strong> 2026-01-22 09:55:45
            </li>
        
        <li>
            <strong>Link:</strong> https://edwarddyc.github.io/2026/01/20/AI-开发技法/
        </li>
        <li>
            <strong>
                License:
            </strong>
            
            This work is licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a>.
            

        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/AI%E3%80%81JAVA/">#AI、JAVA</a>&nbsp;
                    </li>
                
            </ul>
        

        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                        rel="prev"
                        href="/2026/01/22/RAG-%E7%9F%A5%E8%AF%86%E5%BA%93/"
                        >
                            <span class="left arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-left"></i>
                            </span>
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">RAG 知识库</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                        rel="next"
                        href="/2025/07/04/Redis%E5%88%9D%E5%8D%B0%E8%B1%A1/"
                        >
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">Redis初印象</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        


        
            <div class="comment-container">
                <div class="comments-container pjax">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fa-solid fa-comments"></i>&nbsp;Comments
    </div>
    

        
            
 
    <div id="waline"></div>
    <script type="module"  data-swup-reload-script>
        import { init } from '/js/libs/waline.mjs';

        function loadWaline() {
            init({
                el: '#waline',
                serverURL: 'https://example.example.com',
                lang: 'zh-CN',
                dark: 'body[class~="dark-mode"]',
                requiredMeta: ['nick','mail'], // cannot customize by theme config, change it yourself
            });
        }

        if ('true') {
            const loadWalineTimeout = setTimeout(() => {
                loadWaline();
                clearTimeout(loadWalineTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadWaline);
        }
        
    </script>



        
    
</div>

            </div>
        
    </div>

    
        <div class="toc-content-container">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">On this page</div>
        <div class="page-title">AI 开发技法</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%80%BB%E8%A7%88"><span class="nav-text">总览</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#AI-%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A5"><span class="nav-text">AI 大模型接入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%9A%84-2-%E7%A7%8D%E9%80%94%E5%BE%84"><span class="nav-text">使用大模型的 2 种途径</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%E3%80%81%E4%BA%91%E6%9C%8D%E5%8A%A1"><span class="nav-text">1、云服务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%E3%80%81%E8%87%AA%E9%83%A8%E7%BD%B2"><span class="nav-text">2、自部署</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%A5%E5%85%A5%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%9A%84-3-%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="nav-text">接入大模型的 3 种方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%E3%80%81AI-%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0%E6%8E%A5%E5%85%A5"><span class="nav-text">1、AI 应用平台接入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%E3%80%81AI-%E8%BD%AF%E4%BB%B6%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%8E%A5%E5%85%A5"><span class="nav-text">2、AI 软件客户端接入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3%E3%80%81%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%85%A5"><span class="nav-text">3、程序接入</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A8%8B%E5%BA%8F%E8%B0%83%E7%94%A8-AI-%E5%A4%A7%E6%A8%A1%E5%9E%8B"><span class="nav-text">程序调用 AI 大模型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%E3%80%81SDK-%E6%8E%A5%E5%85%A5"><span class="nav-text">1、SDK 接入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%E3%80%81HTTP-%E6%8E%A5%E5%85%A5"><span class="nav-text">2、HTTP 接入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3%E3%80%81Spring-AI"><span class="nav-text">3、Spring AI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4%E3%80%81LangChain4j"><span class="nav-text">4、LangChain4j</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5%E3%80%81Spring-AI-%E8%B0%83%E7%94%A8-Ollama-%E5%A4%A7%E6%A8%A1%E5%9E%8B"><span class="nav-text">5、Spring AI 调用 Ollama 大模型</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Prompt-%E5%B7%A5%E7%A8%8B"><span class="nav-text">Prompt 工程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%90%E7%A4%BA%E8%AF%8D%E5%88%86%E7%B1%BB"><span class="nav-text">提示词分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83-%E5%9F%BA%E4%BA%8E%E8%A7%92%E8%89%B2%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-text">核心 - 基于角色的分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86-%E5%9F%BA%E4%BA%8E%E5%8A%9F%E8%83%BD%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-text">扩展知识 - 基于功能的分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86-%E5%9F%BA%E4%BA%8E%E5%A4%8D%E6%9D%82%E5%BA%A6%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-text">扩展知识 - 基于复杂度的分类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Token"><span class="nav-text">Token</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Token-%E6%88%90%E6%9C%AC%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7"><span class="nav-text">Token 成本优化技巧</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Prompt-%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7"><span class="nav-text">Prompt 优化技巧</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90"><span class="nav-text">学习资源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E6%8F%90%E7%A4%BA%E6%8A%80%E5%B7%A7"><span class="nav-text">基础提示技巧</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9B%E9%98%B6%E6%8F%90%E7%A4%BA%E6%8A%80%E5%B7%A7"><span class="nav-text">进阶提示技巧</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%90%E7%A4%BA%E8%AF%8D%E8%B0%83%E8%AF%95%E4%B8%8E%E4%BC%98%E5%8C%96"><span class="nav-text">提示词调试与优化</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#AI-%E5%BA%94%E7%94%A8%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1"><span class="nav-text">AI 应用方案设计</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1%E3%80%81%E7%B3%BB%E7%BB%9F%E6%8F%90%E7%A4%BA%E8%AF%8D%E8%AE%BE%E8%AE%A1"><span class="nav-text">1、系统提示词设计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%E3%80%81%E5%A4%9A%E8%BD%AE%E5%AF%B9%E8%AF%9D%E5%AE%9E%E7%8E%B0"><span class="nav-text">2、多轮对话实现</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ChatClient-%E7%89%B9%E6%80%A7"><span class="nav-text">ChatClient 特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Advisors"><span class="nav-text">Advisors</span></a></li></ol></li></ol></li></ol>

    </div>
</div>
        </div>
    
</div>



                

            </div>

            

        </div>

        <div class="main-content-footer">
            <footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2023</span>
              -
            
            2026&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Edward YC</a>
        </div>
        
            <script data-swup-reload-script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right">
                
                    <span id="busuanzi_container_site_uv" class="lg:!block">
                        <span class="text-sm">VISITOR COUNT</span>
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="lg:!block">
                        <span class="text-sm">TOTAL PAGE VIEWS</span>
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">POWERED BY <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a></span>
            <span class="text-sm lg:block">THEME&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.5.0</a></span>
        </div>
        
        
            <div>
                Blog up for <span class="odometer" id="runtime_days" ></span> days <span class="odometer" id="runtime_hours"></span> hrs <span class="odometer" id="runtime_minutes"></span> Min <span class="odometer" id="runtime_seconds"></span> Sec
            </div>
        
        
            <script data-swup-reload-script>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>


    
<script src="/js/libs/Swup.min.js"></script>

<script src="/js/libs/SwupSlideTheme.min.js"></script>

<script src="/js/libs/SwupScriptsPlugin.min.js"></script>

<script src="/js/libs/SwupProgressPlugin.min.js"></script>

<script src="/js/libs/SwupScrollPlugin.min.js"></script>

<script src="/js/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>







<script src="/js/tools/imageViewer.js" type="module"></script>

<script src="/js/utils.js" type="module"></script>

<script src="/js/main.js" type="module"></script>

<script src="/js/layouts/navbarShrink.js" type="module"></script>

<script src="/js/tools/scrollTopBottom.js" type="module"></script>

<script src="/js/tools/lightDarkSwitch.js" type="module"></script>

<script src="/js/layouts/categoryList.js" type="module"></script>



    
<script src="/js/tools/localSearch.js" type="module"></script>




    
<script src="/js/tools/codeBlock.js" type="module"></script>




    
<script src="/js/layouts/lazyload.js" type="module"></script>




    
<script src="/js/tools/runtime.js"></script>

    
<script src="/js/libs/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js" type="module"></script>







<div class="post-scripts" data-swup-reload-script>
    
        
<script src="/js/libs/anime.min.js"></script>

        
<script src="/js/tools/tocToggle.js" type="module"></script>

<script src="/js/layouts/toc.js" type="module"></script>

<script src="/js/plugins/tabs.js" type="module"></script>

    
</div>


</body>
</html>
